{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Agent Configuration Schema",
  "type": "object",
  "required": [
    "id",
    "name",
    "category",
    "type",
    "version",
    "description",
    "instructions",
    "claudeMD",
    "inputs",
    "outputs",
    "hooks",
    "resources",
    "tags"
  ],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[a-z0-9-]+$",
      "description": "Unique identifier for the agent (lowercase, alphanumeric, hyphens)"
    },
    "name": {
      "type": "string",
      "description": "Human-readable display name for the agent"
    },
    "category": {
      "type": "string",
      "enum": ["setup", "execution", "testing", "integration", "review", "utility"],
      "description": "Category of the agent"
    },
    "type": {
      "type": "string",
      "description": "Specific type identifier (e.g., nextjs-setup, react-developer)"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Semantic version of the agent"
    },
    "description": {
      "type": "string",
      "description": "Detailed description of the agent's purpose and capabilities"
    },
    "icon": {
      "type": "string",
      "description": "Icon identifier or URL for visual representation"
    },
    "color": {
      "type": "string",
      "pattern": "^#[0-9A-Fa-f]{6}$",
      "description": "Hex color for visual representation"
    },
    "instructions": {
      "type": "object",
      "required": ["base", "contextual"],
      "properties": {
        "base": {
          "type": "string",
          "description": "Base instructions for the agent"
        },
        "contextual": {
          "type": "string",
          "description": "Template for context-specific instructions with variables"
        }
      }
    },
    "claudeMD": {
      "type": "string",
      "description": "Markdown content for the claude.md file"
    },
    "inputs": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["name", "type", "required", "description"],
        "properties": {
          "name": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": ["string", "number", "boolean", "object", "array"]
          },
          "required": {
            "type": "boolean"
          },
          "description": {
            "type": "string"
          },
          "default": {
            "description": "Default value for the input"
          },
          "schema": {
            "type": "object",
            "description": "JSON schema for complex types"
          }
        }
      }
    },
    "outputs": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["name", "type", "description"],
        "properties": {
          "name": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": ["string", "number", "boolean", "object", "array"]
          },
          "description": {
            "type": "string"
          },
          "schema": {
            "type": "object",
            "description": "JSON schema for complex types"
          }
        }
      }
    },
    "hooks": {
      "type": "object",
      "required": ["Stop"],
      "properties": {
        "Stop": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "hooks": {
                "type": "array",
                "items": {
                  "type": "object",
                  "required": ["type", "command"],
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": ["command"]
                    },
                    "command": {
                      "type": "string",
                      "description": "Hook command to execute"
                    }
                  }
                }
              }
            }
          }
        },
        "PostToolUse": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "matcher": {
                "type": "string",
                "description": "Tool name pattern to match"
              },
              "hooks": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "command": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "SessionStart": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "hooks": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "command": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "UserPromptSubmit": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "hooks": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "command": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "SubagentStop": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "hooks": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "command": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "PreCompact": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "hooks": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "command": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "Notification": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "hooks": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string"
                    },
                    "command": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "resources": {
      "type": "object",
      "required": ["estimatedTime", "estimatedTokens", "requiresGPU", "maxRetries"],
      "properties": {
        "estimatedTime": {
          "type": "number",
          "description": "Estimated execution time in minutes"
        },
        "estimatedTokens": {
          "type": "number",
          "description": "Estimated token usage"
        },
        "requiresGPU": {
          "type": "boolean",
          "description": "Whether the agent requires GPU resources"
        },
        "maxRetries": {
          "type": "integer",
          "minimum": 0,
          "description": "Maximum number of retry attempts"
        },
        "memory": {
          "type": "string",
          "description": "Memory requirements (e.g., '2GB')"
        },
        "cpu": {
          "type": "string",
          "description": "CPU requirements (e.g., '2 cores')"
        }
      }
    },
    "dependencies": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "IDs of required agent types that must complete before this agent"
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Searchable tags for the agent"
    }
  }
}